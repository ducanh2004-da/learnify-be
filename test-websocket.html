<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
  <h1>WebSocket Test</h1>
  <div id="status">ƒêang k·∫øt n·ªëi...</div>
  <div id="logs"></div>
  
  <script>
    const logs = document.getElementById('logs');
    const status = document.getElementById('status');
    
    function log(msg) {
      logs.innerHTML += '<div>' + msg + '</div>';
      console.log(msg);
    }

    log('üîå Connecting to http://localhost:10000/chat...');
    
    const socket = io('http://localhost:10000/chat', {
      transports: ['websocket', 'polling'],
      auth: { token: 'dummy-token' } // S·∫Ω fail nh∆∞ng test connection
    });

    socket.on('connect', () => {
      status.innerHTML = '‚úÖ Connected! Socket ID: ' + socket.id;
      status.style.color = 'green';
      log('‚úÖ Socket connected: ' + socket.id);
    });

    socket.on('connect_error', (err) => {
      status.innerHTML = '‚ùå Connection Error: ' + err.message;
      status.style.color = 'red';
      log('‚ùå Connect error: ' + err.message);
    });

    socket.on('error', (err) => {
      log('‚ùå Socket error: ' + err);
    });

    socket.on('disconnect', (reason) => {
      log('‚ùå Disconnected: ' + reason);
    });
  </script>
</body>
</html>